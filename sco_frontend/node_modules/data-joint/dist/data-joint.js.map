{"version":3,"file":"data-joint.js","sources":["../node_modules/index-array-by/dist/index-array-by.module.js","../src/index.js"],"sourcesContent":["function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = arr && (typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]);\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n\n  return (hint === \"string\" ? String : Number)(input);\n}\n\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n\n  return typeof key === \"symbol\" ? key : String(key);\n}\n\nvar index = (function () {\n  var list = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var keyAccessors = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var multiItem = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  var flattenKeys = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var keys = (keyAccessors instanceof Array ? keyAccessors.length ? keyAccessors : [undefined] : [keyAccessors]).map(function (key) {\n    return {\n      keyAccessor: key,\n      isProp: !(key instanceof Function)\n    };\n  });\n  var indexedResult = list.reduce(function (res, item) {\n    var iterObj = res;\n    var itemVal = item;\n    keys.forEach(function (_ref, idx) {\n      var keyAccessor = _ref.keyAccessor,\n          isProp = _ref.isProp;\n      var key;\n\n      if (isProp) {\n        var _itemVal = itemVal,\n            propVal = _itemVal[keyAccessor],\n            rest = _objectWithoutProperties(_itemVal, [keyAccessor].map(_toPropertyKey));\n\n        key = propVal;\n        itemVal = rest;\n      } else {\n        key = keyAccessor(itemVal, idx);\n      }\n\n      if (idx + 1 < keys.length) {\n        if (!iterObj.hasOwnProperty(key)) {\n          iterObj[key] = {};\n        }\n\n        iterObj = iterObj[key];\n      } else {\n        // Leaf key\n        if (multiItem) {\n          if (!iterObj.hasOwnProperty(key)) {\n            iterObj[key] = [];\n          }\n\n          iterObj[key].push(itemVal);\n        } else {\n          iterObj[key] = itemVal;\n        }\n      }\n    });\n    return res;\n  }, {});\n\n  if (multiItem instanceof Function) {\n    // Reduce leaf multiple values\n    (function reduce(node) {\n      var level = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n      if (level === keys.length) {\n        Object.keys(node).forEach(function (k) {\n          return node[k] = multiItem(node[k]);\n        });\n      } else {\n        Object.values(node).forEach(function (child) {\n          return reduce(child, level + 1);\n        });\n      }\n    })(indexedResult); // IIFE\n\n  }\n\n  var result = indexedResult;\n\n  if (flattenKeys) {\n    // flatten into array\n    result = [];\n\n    (function flatten(node) {\n      var accKeys = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n      if (accKeys.length === keys.length) {\n        result.push({\n          keys: accKeys,\n          vals: node\n        });\n      } else {\n        Object.entries(node).forEach(function (_ref2) {\n          var _ref3 = _slicedToArray(_ref2, 2),\n              key = _ref3[0],\n              val = _ref3[1];\n\n          return flatten(val, [].concat(_toConsumableArray(accKeys), [key]));\n        });\n      }\n    })(indexedResult); //IIFE\n\n\n    if (keyAccessors instanceof Array && keyAccessors.length === 0 && result.length === 1) {\n      // clear keys if there's no key accessors (single result)\n      result[0].keys = [];\n    }\n  }\n\n  return result;\n});\n\nexport default index;\n","import indexBy from 'index-array-by';\n\nfunction diffArrays(prev, next, idAccessor) {\n  const result = { enter: [], update: [], exit: [] };\n\n  if (!idAccessor) { // use object references for comparison\n    const prevSet = new Set(prev);\n    const nextSet = new Set(next);\n\n    new Set([...prevSet, ...nextSet]).forEach(item => {\n      const type = !prevSet.has(item)\n        ? 'enter'\n        : !nextSet.has(item)\n          ? 'exit'\n          : 'update';\n\n      result[type].push(type === 'update' ? [item, item]: item);\n    });\n  } else { // compare by id (duplicate keys are ignored)\n    const prevById = indexBy(prev, idAccessor, false);\n    const nextById = indexBy(next, idAccessor, false);\n    const byId = Object.assign({}, prevById, nextById);\n\n    Object.entries(byId).forEach(([id, item]) => {\n      const type = !prevById.hasOwnProperty(id)\n        ? 'enter'\n        : !nextById.hasOwnProperty(id)\n          ? 'exit'\n          : 'update';\n\n      result[type].push(type === 'update' ? [prevById[id], nextById[id]]: item);\n    });\n  }\n\n  return result;\n}\n\nfunction dataBindDiff(\n  data,\n  existingObjs,\n  {\n    objBindAttr = '__obj',\n    dataBindAttr = '__data',\n    idAccessor,\n    purge = false\n  }\n) {\n  const isObjValid = obj => obj.hasOwnProperty(dataBindAttr);\n\n  const removeObjs = existingObjs.filter(obj => !isObjValid(obj));\n\n  const prevD = existingObjs.filter(isObjValid).map(obj => obj[dataBindAttr]);\n  const nextD = data;\n\n  const diff = purge\n    ? { enter: nextD, exit: prevD, update: [] } // don't diff data in purge mode\n    : diffArrays(prevD, nextD, idAccessor);\n\n  diff.update = diff.update.map(([prevD, nextD]) => {\n    if (prevD !== nextD) {\n      // transfer obj to new data point (if different)\n      nextD[objBindAttr] = prevD[objBindAttr];\n      nextD[objBindAttr][dataBindAttr] = nextD;\n    }\n    return nextD;\n  });\n  diff.exit = diff.exit.concat(removeObjs.map(obj => ({\n    [objBindAttr]: obj\n  })));\n\n  return diff;\n}\n\nfunction viewDigest(\n  data,\n  existingObjs, // list\n  appendObj,  // item => {...} function\n  removeObj, // item => {...} function\n  {\n    createObj = d => ({}),\n    updateObj = (obj, d) => {},\n    exitObj = obj => {},\n    objBindAttr = '__obj',\n    dataBindAttr = '__data',\n    ...dataDiffOptions\n  }\n) {\n  const { enter, update, exit } = dataBindDiff(data, existingObjs, { objBindAttr, dataBindAttr, ...dataDiffOptions });\n\n  // Remove exiting points\n  exit.forEach(d => {\n    const obj = d[objBindAttr];\n    delete(d[objBindAttr]); // unbind obj\n\n    exitObj(obj);\n    removeObj(obj);\n  });\n\n  const newObjs = createObjs(enter);\n  const pointsData = [...enter, ...update];\n  updateObjs(pointsData);\n\n  // Add new points\n  newObjs.forEach(appendObj);\n\n  //\n\n  function createObjs(data) {\n    const newObjs = [];\n\n    data.forEach(d => {\n      const obj = createObj(d);\n      if (obj) {\n        obj[dataBindAttr] = d;\n        d[objBindAttr] = obj;\n\n        newObjs.push(obj);\n      }\n    });\n\n    return newObjs;\n  }\n\n  function updateObjs(data) {\n    data.forEach(d => {\n      const obj = d[objBindAttr];\n      if (obj) {\n        obj[dataBindAttr] = d;\n        updateObj(obj, d);\n      }\n    });\n  }\n}\n\nexport default viewDigest;\n"],"names":["diffArrays","prev","next","idAccessor","result","enter","update","exit","prevSet","Set","nextSet","forEach","item","type","has","push","prevById","indexBy","nextById","byId","Object","assign","entries","id","hasOwnProperty","dataBindDiff","data","existingObjs","objBindAttr","dataBindAttr","purge","isObjValid","obj","removeObjs","filter","prevD","map","nextD","diff","concat","viewDigest","appendObj","removeObj","createObj","d","updateObj","exitObj","dataDiffOptions","newObjs","createObjs","pointsData","updateObjs"],"mappings":"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"}