{"ast":null,"code":"/**\n * Polyfill for the additional KeyboardEvent properties defined in the D3E and\n * D4E draft specifications, by @inexorabletash.\n *\n * See: https://github.com/inexorabletash/polyfill\n */\n(function (global) {\n  var nativeKeyboardEvent = ('KeyboardEvent' in global);\n  if (!nativeKeyboardEvent) global.KeyboardEvent = function KeyboardEvent() {\n    throw TypeError('Illegal constructor');\n  };\n  if (!('DOM_KEY_LOCATION_STANDARD' in global.KeyboardEvent)) global.KeyboardEvent.DOM_KEY_LOCATION_STANDARD = 0x00; // Default or unknown location\n\n  if (!('DOM_KEY_LOCATION_LEFT' in global.KeyboardEvent)) global.KeyboardEvent.DOM_KEY_LOCATION_LEFT = 0x01; // e.g. Left Alt key\n\n  if (!('DOM_KEY_LOCATION_RIGHT' in global.KeyboardEvent)) global.KeyboardEvent.DOM_KEY_LOCATION_RIGHT = 0x02; // e.g. Right Alt key\n\n  if (!('DOM_KEY_LOCATION_NUMPAD' in global.KeyboardEvent)) global.KeyboardEvent.DOM_KEY_LOCATION_NUMPAD = 0x03; // e.g. Numpad 0 or +\n\n  var STANDARD = window.KeyboardEvent.DOM_KEY_LOCATION_STANDARD,\n      LEFT = window.KeyboardEvent.DOM_KEY_LOCATION_LEFT,\n      RIGHT = window.KeyboardEvent.DOM_KEY_LOCATION_RIGHT,\n      NUMPAD = window.KeyboardEvent.DOM_KEY_LOCATION_NUMPAD; //--------------------------------------------------------------------\n  //\n  // Utilities\n  //\n  //--------------------------------------------------------------------\n\n  function contains(s, ss) {\n    return String(s).indexOf(ss) !== -1;\n  }\n\n  var os = function () {\n    if (contains(navigator.platform, 'Win')) {\n      return 'win';\n    }\n\n    if (contains(navigator.platform, 'Mac')) {\n      return 'mac';\n    }\n\n    if (contains(navigator.platform, 'CrOS')) {\n      return 'cros';\n    }\n\n    if (contains(navigator.platform, 'Linux')) {\n      return 'linux';\n    }\n\n    if (contains(navigator.userAgent, 'iPad') || contains(navigator.platform, 'iPod') || contains(navigator.platform, 'iPhone')) {\n      return 'ios';\n    }\n\n    return '';\n  }();\n\n  var browser = function () {\n    if (contains(navigator.userAgent, 'Chrome/')) {\n      return 'chrome';\n    }\n\n    if (contains(navigator.vendor, 'Apple')) {\n      return 'safari';\n    }\n\n    if (contains(navigator.userAgent, 'MSIE')) {\n      return 'ie';\n    }\n\n    if (contains(navigator.userAgent, 'Gecko/')) {\n      return 'moz';\n    }\n\n    if (contains(navigator.userAgent, 'Opera/')) {\n      return 'opera';\n    }\n\n    return '';\n  }();\n\n  var browser_os = browser + '-' + os;\n\n  function mergeIf(baseTable, select, table) {\n    if (browser_os === select || browser === select || os === select) {\n      Object.keys(table).forEach(function (keyCode) {\n        baseTable[keyCode] = table[keyCode];\n      });\n    }\n  }\n\n  function remap(o, key) {\n    var r = {};\n    Object.keys(o).forEach(function (k) {\n      var item = o[k];\n\n      if (key in item) {\n        r[item[key]] = item;\n      }\n    });\n    return r;\n  }\n\n  function invert(o) {\n    var r = {};\n    Object.keys(o).forEach(function (k) {\n      r[o[k]] = k;\n    });\n    return r;\n  } //--------------------------------------------------------------------\n  //\n  // Generic Mappings\n  //\n  //--------------------------------------------------------------------\n  // \"keyInfo\" is a dictionary:\n  //   code: string - name from DOM Level 3 KeyboardEvent code Values\n  //     https://dvcs.w3.org/hg/dom3events/raw-file/tip/html/DOM3Events-code.html\n  //   location (optional): number - one of the DOM_KEY_LOCATION values\n  //   keyCap (optional): string - keyboard label in en-US locale\n  // USB code Usage ID from page 0x07 unless otherwise noted (Informative)\n  // Map of keyCode to keyInfo\n\n\n  var keyCodeToInfoTable = {\n    // 0x01 - VK_LBUTTON\n    // 0x02 - VK_RBUTTON\n    0x03: {\n      code: 'Cancel'\n    },\n    // [USB: 0x9b] char \\x0018 ??? (Not in D3E)\n    // 0x04 - VK_MBUTTON\n    // 0x05 - VK_XBUTTON1\n    // 0x06 - VK_XBUTTON2\n    0x06: {\n      code: 'Help'\n    },\n    // [USB: 0x75] ???\n    // 0x07 - undefined\n    0x08: {\n      code: 'Backspace'\n    },\n    // [USB: 0x2a] Labelled Delete on Macintosh keyboards.\n    0x09: {\n      code: 'Tab'\n    },\n    // [USB: 0x2b]\n    // 0x0A-0x0B - reserved\n    0X0C: {\n      code: 'Clear'\n    },\n    // [USB: 0x9c] NumPad Center (Not in D3E)\n    0X0D: {\n      code: 'Enter'\n    },\n    // [USB: 0x28]\n    // 0x0E-0x0F - undefined\n    0x10: {\n      code: 'Shift'\n    },\n    0x11: {\n      code: 'Control'\n    },\n    0x12: {\n      code: 'Alt'\n    },\n    0x13: {\n      code: 'Pause'\n    },\n    // [USB: 0x48]\n    0x14: {\n      code: 'CapsLock'\n    },\n    // [USB: 0x39]\n    0x15: {\n      code: 'KanaMode'\n    },\n    // [USB: 0x88] - \"HangulMode\" for Korean layout\n    0x16: {\n      code: 'HangulMode'\n    },\n    // [USB: 0x90] 0x15 as well in MSDN VK table ???\n    0x17: {\n      code: 'JunjaMode'\n    },\n    // (Not in D3E)\n    0x18: {\n      code: 'FinalMode'\n    },\n    // (Not in D3E)\n    0x19: {\n      code: 'KanjiMode'\n    },\n    // [USB: 0x91] - \"HanjaMode\" for Korean layout\n    // 0x1A - undefined\n    0x1B: {\n      code: 'Escape'\n    },\n    // [USB: 0x29]\n    0x1C: {\n      code: 'Convert'\n    },\n    // [USB: 0x8a]\n    0x1D: {\n      code: 'NonConvert'\n    },\n    // [USB: 0x8b]\n    0x1E: {\n      code: 'Accept'\n    },\n    // (Not in D3E)\n    0x1F: {\n      code: 'ModeChange'\n    },\n    // (Not in D3E)\n    0x20: {\n      code: 'Space'\n    },\n    // [USB: 0x2c]\n    0x21: {\n      code: 'PageUp'\n    },\n    // [USB: 0x4b]\n    0x22: {\n      code: 'PageDown'\n    },\n    // [USB: 0x4e]\n    0x23: {\n      code: 'End'\n    },\n    // [USB: 0x4d]\n    0x24: {\n      code: 'Home'\n    },\n    // [USB: 0x4a]\n    0x25: {\n      code: 'ArrowLeft'\n    },\n    // [USB: 0x50]\n    0x26: {\n      code: 'ArrowUp'\n    },\n    // [USB: 0x52]\n    0x27: {\n      code: 'ArrowRight'\n    },\n    // [USB: 0x4f]\n    0x28: {\n      code: 'ArrowDown'\n    },\n    // [USB: 0x51]\n    0x29: {\n      code: 'Select'\n    },\n    // (Not in D3E)\n    0x2A: {\n      code: 'Print'\n    },\n    // (Not in D3E)\n    0x2B: {\n      code: 'Execute'\n    },\n    // [USB: 0x74] (Not in D3E)\n    0x2C: {\n      code: 'PrintScreen'\n    },\n    // [USB: 0x46]\n    0x2D: {\n      code: 'Insert'\n    },\n    // [USB: 0x49]\n    0x2E: {\n      code: 'Delete'\n    },\n    // [USB: 0x4c]\n    0x2F: {\n      code: 'Help'\n    },\n    // [USB: 0x75] ???\n    0x30: {\n      code: 'Digit0',\n      keyCap: '0'\n    },\n    // [USB: 0x27] 0)\n    0x31: {\n      code: 'Digit1',\n      keyCap: '1'\n    },\n    // [USB: 0x1e] 1!\n    0x32: {\n      code: 'Digit2',\n      keyCap: '2'\n    },\n    // [USB: 0x1f] 2@\n    0x33: {\n      code: 'Digit3',\n      keyCap: '3'\n    },\n    // [USB: 0x20] 3#\n    0x34: {\n      code: 'Digit4',\n      keyCap: '4'\n    },\n    // [USB: 0x21] 4$\n    0x35: {\n      code: 'Digit5',\n      keyCap: '5'\n    },\n    // [USB: 0x22] 5%\n    0x36: {\n      code: 'Digit6',\n      keyCap: '6'\n    },\n    // [USB: 0x23] 6^\n    0x37: {\n      code: 'Digit7',\n      keyCap: '7'\n    },\n    // [USB: 0x24] 7&\n    0x38: {\n      code: 'Digit8',\n      keyCap: '8'\n    },\n    // [USB: 0x25] 8*\n    0x39: {\n      code: 'Digit9',\n      keyCap: '9'\n    },\n    // [USB: 0x26] 9(\n    // 0x3A-0x40 - undefined\n    0x41: {\n      code: 'KeyA',\n      keyCap: 'a'\n    },\n    // [USB: 0x04]\n    0x42: {\n      code: 'KeyB',\n      keyCap: 'b'\n    },\n    // [USB: 0x05]\n    0x43: {\n      code: 'KeyC',\n      keyCap: 'c'\n    },\n    // [USB: 0x06]\n    0x44: {\n      code: 'KeyD',\n      keyCap: 'd'\n    },\n    // [USB: 0x07]\n    0x45: {\n      code: 'KeyE',\n      keyCap: 'e'\n    },\n    // [USB: 0x08]\n    0x46: {\n      code: 'KeyF',\n      keyCap: 'f'\n    },\n    // [USB: 0x09]\n    0x47: {\n      code: 'KeyG',\n      keyCap: 'g'\n    },\n    // [USB: 0x0a]\n    0x48: {\n      code: 'KeyH',\n      keyCap: 'h'\n    },\n    // [USB: 0x0b]\n    0x49: {\n      code: 'KeyI',\n      keyCap: 'i'\n    },\n    // [USB: 0x0c]\n    0x4A: {\n      code: 'KeyJ',\n      keyCap: 'j'\n    },\n    // [USB: 0x0d]\n    0x4B: {\n      code: 'KeyK',\n      keyCap: 'k'\n    },\n    // [USB: 0x0e]\n    0x4C: {\n      code: 'KeyL',\n      keyCap: 'l'\n    },\n    // [USB: 0x0f]\n    0x4D: {\n      code: 'KeyM',\n      keyCap: 'm'\n    },\n    // [USB: 0x10]\n    0x4E: {\n      code: 'KeyN',\n      keyCap: 'n'\n    },\n    // [USB: 0x11]\n    0x4F: {\n      code: 'KeyO',\n      keyCap: 'o'\n    },\n    // [USB: 0x12]\n    0x50: {\n      code: 'KeyP',\n      keyCap: 'p'\n    },\n    // [USB: 0x13]\n    0x51: {\n      code: 'KeyQ',\n      keyCap: 'q'\n    },\n    // [USB: 0x14]\n    0x52: {\n      code: 'KeyR',\n      keyCap: 'r'\n    },\n    // [USB: 0x15]\n    0x53: {\n      code: 'KeyS',\n      keyCap: 's'\n    },\n    // [USB: 0x16]\n    0x54: {\n      code: 'KeyT',\n      keyCap: 't'\n    },\n    // [USB: 0x17]\n    0x55: {\n      code: 'KeyU',\n      keyCap: 'u'\n    },\n    // [USB: 0x18]\n    0x56: {\n      code: 'KeyV',\n      keyCap: 'v'\n    },\n    // [USB: 0x19]\n    0x57: {\n      code: 'KeyW',\n      keyCap: 'w'\n    },\n    // [USB: 0x1a]\n    0x58: {\n      code: 'KeyX',\n      keyCap: 'x'\n    },\n    // [USB: 0x1b]\n    0x59: {\n      code: 'KeyY',\n      keyCap: 'y'\n    },\n    // [USB: 0x1c]\n    0x5A: {\n      code: 'KeyZ',\n      keyCap: 'z'\n    },\n    // [USB: 0x1d]\n    0x5B: {\n      code: 'OSLeft',\n      location: LEFT\n    },\n    // [USB: 0xe3]\n    0x5C: {\n      code: 'OSRight',\n      location: RIGHT\n    },\n    // [USB: 0xe7]\n    0x5D: {\n      code: 'ContextMenu'\n    },\n    // [USB: 0x65] Context Menu\n    // 0x5E - reserved\n    0x5F: {\n      code: 'Standby'\n    },\n    // [USB: 0x82] Sleep\n    0x60: {\n      code: 'Numpad0',\n      keyCap: '0',\n      location: NUMPAD\n    },\n    // [USB: 0x62]\n    0x61: {\n      code: 'Numpad1',\n      keyCap: '1',\n      location: NUMPAD\n    },\n    // [USB: 0x59]\n    0x62: {\n      code: 'Numpad2',\n      keyCap: '2',\n      location: NUMPAD\n    },\n    // [USB: 0x5a]\n    0x63: {\n      code: 'Numpad3',\n      keyCap: '3',\n      location: NUMPAD\n    },\n    // [USB: 0x5b]\n    0x64: {\n      code: 'Numpad4',\n      keyCap: '4',\n      location: NUMPAD\n    },\n    // [USB: 0x5c]\n    0x65: {\n      code: 'Numpad5',\n      keyCap: '5',\n      location: NUMPAD\n    },\n    // [USB: 0x5d]\n    0x66: {\n      code: 'Numpad6',\n      keyCap: '6',\n      location: NUMPAD\n    },\n    // [USB: 0x5e]\n    0x67: {\n      code: 'Numpad7',\n      keyCap: '7',\n      location: NUMPAD\n    },\n    // [USB: 0x5f]\n    0x68: {\n      code: 'Numpad8',\n      keyCap: '8',\n      location: NUMPAD\n    },\n    // [USB: 0x60]\n    0x69: {\n      code: 'Numpad9',\n      keyCap: '9',\n      location: NUMPAD\n    },\n    // [USB: 0x61]\n    0x6A: {\n      code: 'NumpadMultiply',\n      keyCap: '*',\n      location: NUMPAD\n    },\n    // [USB: 0x55]\n    0x6B: {\n      code: 'NumpadAdd',\n      keyCap: '+',\n      location: NUMPAD\n    },\n    // [USB: 0x57]\n    0x6C: {\n      code: 'NumpadComma',\n      keyCap: ',',\n      location: NUMPAD\n    },\n    // [USB: 0x85]\n    0x6D: {\n      code: 'NumpadSubtract',\n      keyCap: '-',\n      location: NUMPAD\n    },\n    // [USB: 0x56]\n    0x6E: {\n      code: 'NumpadDecimal',\n      keyCap: '.',\n      location: NUMPAD\n    },\n    // [USB: 0x63]\n    0x6F: {\n      code: 'NumpadDivide',\n      keyCap: '/',\n      location: NUMPAD\n    },\n    // [USB: 0x54]\n    0x70: {\n      code: 'F1'\n    },\n    // [USB: 0x3a]\n    0x71: {\n      code: 'F2'\n    },\n    // [USB: 0x3b]\n    0x72: {\n      code: 'F3'\n    },\n    // [USB: 0x3c]\n    0x73: {\n      code: 'F4'\n    },\n    // [USB: 0x3d]\n    0x74: {\n      code: 'F5'\n    },\n    // [USB: 0x3e]\n    0x75: {\n      code: 'F6'\n    },\n    // [USB: 0x3f]\n    0x76: {\n      code: 'F7'\n    },\n    // [USB: 0x40]\n    0x77: {\n      code: 'F8'\n    },\n    // [USB: 0x41]\n    0x78: {\n      code: 'F9'\n    },\n    // [USB: 0x42]\n    0x79: {\n      code: 'F10'\n    },\n    // [USB: 0x43]\n    0x7A: {\n      code: 'F11'\n    },\n    // [USB: 0x44]\n    0x7B: {\n      code: 'F12'\n    },\n    // [USB: 0x45]\n    0x7C: {\n      code: 'F13'\n    },\n    // [USB: 0x68]\n    0x7D: {\n      code: 'F14'\n    },\n    // [USB: 0x69]\n    0x7E: {\n      code: 'F15'\n    },\n    // [USB: 0x6a]\n    0x7F: {\n      code: 'F16'\n    },\n    // [USB: 0x6b]\n    0x80: {\n      code: 'F17'\n    },\n    // [USB: 0x6c]\n    0x81: {\n      code: 'F18'\n    },\n    // [USB: 0x6d]\n    0x82: {\n      code: 'F19'\n    },\n    // [USB: 0x6e]\n    0x83: {\n      code: 'F20'\n    },\n    // [USB: 0x6f]\n    0x84: {\n      code: 'F21'\n    },\n    // [USB: 0x70]\n    0x85: {\n      code: 'F22'\n    },\n    // [USB: 0x71]\n    0x86: {\n      code: 'F23'\n    },\n    // [USB: 0x72]\n    0x87: {\n      code: 'F24'\n    },\n    // [USB: 0x73]\n    // 0x88-0x8F - unassigned\n    0x90: {\n      code: 'NumLock',\n      location: NUMPAD\n    },\n    // [USB: 0x53]\n    0x91: {\n      code: 'ScrollLock'\n    },\n    // [USB: 0x47]\n    // 0x92-0x96 - OEM specific\n    // 0x97-0x9F - unassigned\n    // NOTE: 0xA0-0xA5 usually mapped to 0x10-0x12 in browsers\n    0xA0: {\n      code: 'ShiftLeft',\n      location: LEFT\n    },\n    // [USB: 0xe1]\n    0xA1: {\n      code: 'ShiftRight',\n      location: RIGHT\n    },\n    // [USB: 0xe5]\n    0xA2: {\n      code: 'ControlLeft',\n      location: LEFT\n    },\n    // [USB: 0xe0]\n    0xA3: {\n      code: 'ControlRight',\n      location: RIGHT\n    },\n    // [USB: 0xe4]\n    0xA4: {\n      code: 'AltLeft',\n      location: LEFT\n    },\n    // [USB: 0xe2]\n    0xA5: {\n      code: 'AltRight',\n      location: RIGHT\n    },\n    // [USB: 0xe6]\n    0xA6: {\n      code: 'BrowserBack'\n    },\n    // [USB: 0x0c/0x0224]\n    0xA7: {\n      code: 'BrowserForward'\n    },\n    // [USB: 0x0c/0x0225]\n    0xA8: {\n      code: 'BrowserRefresh'\n    },\n    // [USB: 0x0c/0x0227]\n    0xA9: {\n      code: 'BrowserStop'\n    },\n    // [USB: 0x0c/0x0226]\n    0xAA: {\n      code: 'BrowserSearch'\n    },\n    // [USB: 0x0c/0x0221]\n    0xAB: {\n      code: 'BrowserFavorites'\n    },\n    // [USB: 0x0c/0x0228]\n    0xAC: {\n      code: 'BrowserHome'\n    },\n    // [USB: 0x0c/0x0222]\n    0xAD: {\n      code: 'VolumeMute'\n    },\n    // [USB: 0x7f]\n    0xAE: {\n      code: 'VolumeDown'\n    },\n    // [USB: 0x81]\n    0xAF: {\n      code: 'VolumeUp'\n    },\n    // [USB: 0x80]\n    0xB0: {\n      code: 'MediaTrackNext'\n    },\n    // [USB: 0x0c/0x00b5]\n    0xB1: {\n      code: 'MediaTrackPrevious'\n    },\n    // [USB: 0x0c/0x00b6]\n    0xB2: {\n      code: 'MediaStop'\n    },\n    // [USB: 0x0c/0x00b7]\n    0xB3: {\n      code: 'MediaPlayPause'\n    },\n    // [USB: 0x0c/0x00cd]\n    0xB4: {\n      code: 'LaunchMail'\n    },\n    // [USB: 0x0c/0x018a]\n    0xB5: {\n      code: 'MediaSelect'\n    },\n    0xB6: {\n      code: 'LaunchApp1'\n    },\n    0xB7: {\n      code: 'LaunchApp2'\n    },\n    // 0xB8-0xB9 - reserved\n    0xBA: {\n      code: 'Semicolon',\n      keyCap: ';'\n    },\n    // [USB: 0x33] ;: (US Standard 101)\n    0xBB: {\n      code: 'Equal',\n      keyCap: '='\n    },\n    // [USB: 0x2e] =+\n    0xBC: {\n      code: 'Comma',\n      keyCap: ','\n    },\n    // [USB: 0x36] ,<\n    0xBD: {\n      code: 'Minus',\n      keyCap: '-'\n    },\n    // [USB: 0x2d] -_\n    0xBE: {\n      code: 'Period',\n      keyCap: '.'\n    },\n    // [USB: 0x37] .>\n    0xBF: {\n      code: 'Slash',\n      keyCap: '/'\n    },\n    // [USB: 0x38] /? (US Standard 101)\n    0xC0: {\n      code: 'Backquote',\n      keyCap: '`'\n    },\n    // [USB: 0x35] `~ (US Standard 101)\n    // 0xC1-0xCF - reserved\n    // 0xD0-0xD7 - reserved\n    // 0xD8-0xDA - unassigned\n    0xDB: {\n      code: 'BracketLeft',\n      keyCap: '['\n    },\n    // [USB: 0x2f] [{ (US Standard 101)\n    0xDC: {\n      code: 'Backslash',\n      keyCap: '\\\\'\n    },\n    // [USB: 0x31] \\| (US Standard 101)\n    0xDD: {\n      code: 'BracketRight',\n      keyCap: ']'\n    },\n    // [USB: 0x30] ]} (US Standard 101)\n    0xDE: {\n      code: 'Quote',\n      keyCap: '\\''\n    },\n    // [USB: 0x34] '\" (US Standard 101)\n    // 0xDF - miscellaneous/varies\n    // 0xE0 - reserved\n    // 0xE1 - OEM specific\n    0xE2: {\n      code: 'IntlBackslash',\n      keyCap: '\\\\'\n    },\n    // [USB: 0x64] \\| (UK Standard 102)\n    // 0xE3-0xE4 - OEM specific\n    0xE5: {\n      code: 'Process'\n    },\n    // (Not in D3E)\n    // 0xE6 - OEM specific\n    // 0xE7 - VK_PACKET\n    // 0xE8 - unassigned\n    // 0xE9-0xEF - OEM specific\n    // 0xF0-0xF5 - OEM specific\n    0xF6: {\n      code: 'Attn'\n    },\n    // [USB: 0x9a] (Not in D3E)\n    0xF7: {\n      code: 'CrSel'\n    },\n    // [USB: 0xa3] (Not in D3E)\n    0xF8: {\n      code: 'ExSel'\n    },\n    // [USB: 0xa4] (Not in D3E)\n    0xF9: {\n      code: 'EraseEof'\n    },\n    // (Not in D3E)\n    0xFA: {\n      code: 'Play'\n    },\n    // (Not in D3E)\n    0xFB: {\n      code: 'ZoomToggle'\n    },\n    // (Not in D3E)\n    // 0xFC - VK_NONAME - reserved\n    // 0xFD - VK_PA1\n    0xFE: {\n      code: 'Clear'\n    } // [USB: 0x9c] (Not in D3E)\n\n  }; // No legacy keyCode, but listed in D3E:\n  // code: usb\n  // 'IntlHash': 0x070032,\n  // 'IntlRo': 0x070087,\n  // 'IntlYen': 0x070089,\n  // 'NumpadBackspace': 0x0700bb,\n  // 'NumpadClear': 0x0700d8,\n  // 'NumpadClearEntry': 0x0700d9,\n  // 'NumpadMemoryAdd': 0x0700d3,\n  // 'NumpadMemoryClear': 0x0700d2,\n  // 'NumpadMemoryRecall': 0x0700d1,\n  // 'NumpadMemoryStore': 0x0700d0,\n  // 'NumpadMemorySubtract': 0x0700d4,\n  // 'NumpadParenLeft': 0x0700b6,\n  // 'NumpadParenRight': 0x0700b7,\n  //--------------------------------------------------------------------\n  //\n  // Browser/OS Specific Mappings\n  //\n  //--------------------------------------------------------------------\n\n  mergeIf(keyCodeToInfoTable, 'moz', {\n    0x3B: {\n      code: 'Semicolon',\n      keyCap: ';'\n    },\n    // [USB: 0x33] ;: (US Standard 101)\n    0x3D: {\n      code: 'Equal',\n      keyCap: '='\n    },\n    // [USB: 0x2e] =+\n    0x6B: {\n      code: 'Equal',\n      keyCap: '='\n    },\n    // [USB: 0x2e] =+\n    0x6D: {\n      code: 'Minus',\n      keyCap: '-'\n    },\n    // [USB: 0x2d] -_\n    0xBB: {\n      code: 'NumpadAdd',\n      keyCap: '+',\n      location: NUMPAD\n    },\n    // [USB: 0x57]\n    0xBD: {\n      code: 'NumpadSubtract',\n      keyCap: '-',\n      location: NUMPAD\n    } // [USB: 0x56]\n\n  });\n  mergeIf(keyCodeToInfoTable, 'moz-mac', {\n    0x0C: {\n      code: 'NumLock',\n      location: NUMPAD\n    },\n    // [USB: 0x53]\n    0xAD: {\n      code: 'Minus',\n      keyCap: '-'\n    } // [USB: 0x2d] -_\n\n  });\n  mergeIf(keyCodeToInfoTable, 'moz-win', {\n    0xAD: {\n      code: 'Minus',\n      keyCap: '-'\n    } // [USB: 0x2d] -_\n\n  });\n  mergeIf(keyCodeToInfoTable, 'chrome-mac', {\n    0x5D: {\n      code: 'OSRight',\n      location: RIGHT\n    } // [USB: 0xe7]\n\n  }); // Windows via Bootcamp (!)\n\n  if (0) {\n    mergeIf(keyCodeToInfoTable, 'chrome-win', {\n      0xC0: {\n        code: 'Quote',\n        keyCap: '\\''\n      },\n      // [USB: 0x34] '\" (US Standard 101)\n      0xDE: {\n        code: 'Backslash',\n        keyCap: '\\\\'\n      },\n      // [USB: 0x31] \\| (US Standard 101)\n      0xDF: {\n        code: 'Backquote',\n        keyCap: '`'\n      } // [USB: 0x35] `~ (US Standard 101)\n\n    });\n    mergeIf(keyCodeToInfoTable, 'ie', {\n      0xC0: {\n        code: 'Quote',\n        keyCap: '\\''\n      },\n      // [USB: 0x34] '\" (US Standard 101)\n      0xDE: {\n        code: 'Backslash',\n        keyCap: '\\\\'\n      },\n      // [USB: 0x31] \\| (US Standard 101)\n      0xDF: {\n        code: 'Backquote',\n        keyCap: '`'\n      } // [USB: 0x35] `~ (US Standard 101)\n\n    });\n  }\n\n  mergeIf(keyCodeToInfoTable, 'safari', {\n    0x03: {\n      code: 'Enter'\n    },\n    // [USB: 0x28] old Safari\n    0x19: {\n      code: 'Tab'\n    } // [USB: 0x2b] old Safari for Shift+Tab\n\n  });\n  mergeIf(keyCodeToInfoTable, 'ios', {\n    0x0A: {\n      code: 'Enter',\n      location: STANDARD\n    } // [USB: 0x28]\n\n  });\n  mergeIf(keyCodeToInfoTable, 'safari-mac', {\n    0x5B: {\n      code: 'OSLeft',\n      location: LEFT\n    },\n    // [USB: 0xe3]\n    0x5D: {\n      code: 'OSRight',\n      location: RIGHT\n    },\n    // [USB: 0xe7]\n    0xE5: {\n      code: 'KeyQ',\n      keyCap: 'Q'\n    } // [USB: 0x14] On alternate presses, Ctrl+Q sends this\n\n  }); //--------------------------------------------------------------------\n  //\n  // Identifier Mappings\n  //\n  //--------------------------------------------------------------------\n  // Cases where newer-ish browsers send keyIdentifier which can be\n  // used to disambiguate keys.\n  // keyIdentifierTable[keyIdentifier] -> keyInfo\n\n  var keyIdentifierTable = {};\n\n  if ('cros' === os) {\n    keyIdentifierTable['U+00A0'] = {\n      code: 'ShiftLeft',\n      location: LEFT\n    };\n    keyIdentifierTable['U+00A1'] = {\n      code: 'ShiftRight',\n      location: RIGHT\n    };\n    keyIdentifierTable['U+00A2'] = {\n      code: 'ControlLeft',\n      location: LEFT\n    };\n    keyIdentifierTable['U+00A3'] = {\n      code: 'ControlRight',\n      location: RIGHT\n    };\n    keyIdentifierTable['U+00A4'] = {\n      code: 'AltLeft',\n      location: LEFT\n    };\n    keyIdentifierTable['U+00A5'] = {\n      code: 'AltRight',\n      location: RIGHT\n    };\n  }\n\n  if ('chrome-mac' === browser_os) {\n    keyIdentifierTable['U+0010'] = {\n      code: 'ContextMenu'\n    };\n  }\n\n  if ('safari-mac' === browser_os) {\n    keyIdentifierTable['U+0010'] = {\n      code: 'ContextMenu'\n    };\n  }\n\n  if ('ios' === os) {\n    // These only generate keyup events\n    keyIdentifierTable['U+0010'] = {\n      code: 'Function'\n    };\n    keyIdentifierTable['U+001C'] = {\n      code: 'ArrowLeft'\n    };\n    keyIdentifierTable['U+001D'] = {\n      code: 'ArrowRight'\n    };\n    keyIdentifierTable['U+001E'] = {\n      code: 'ArrowUp'\n    };\n    keyIdentifierTable['U+001F'] = {\n      code: 'ArrowDown'\n    };\n    keyIdentifierTable['U+0001'] = {\n      code: 'Home'\n    }; // [USB: 0x4a] Fn + ArrowLeft\n\n    keyIdentifierTable['U+0004'] = {\n      code: 'End'\n    }; // [USB: 0x4d] Fn + ArrowRight\n\n    keyIdentifierTable['U+000B'] = {\n      code: 'PageUp'\n    }; // [USB: 0x4b] Fn + ArrowUp\n\n    keyIdentifierTable['U+000C'] = {\n      code: 'PageDown'\n    }; // [USB: 0x4e] Fn + ArrowDown\n  } //--------------------------------------------------------------------\n  //\n  // Location Mappings\n  //\n  //--------------------------------------------------------------------\n  // Cases where newer-ish browsers send location/keyLocation which\n  // can be used to disambiguate keys.\n  // locationTable[location][keyCode] -> keyInfo\n\n\n  var locationTable = [];\n  locationTable[LEFT] = {\n    0x10: {\n      code: 'ShiftLeft',\n      location: LEFT\n    },\n    // [USB: 0xe1]\n    0x11: {\n      code: 'ControlLeft',\n      location: LEFT\n    },\n    // [USB: 0xe0]\n    0x12: {\n      code: 'AltLeft',\n      location: LEFT\n    } // [USB: 0xe2]\n\n  };\n  locationTable[RIGHT] = {\n    0x10: {\n      code: 'ShiftRight',\n      location: RIGHT\n    },\n    // [USB: 0xe5]\n    0x11: {\n      code: 'ControlRight',\n      location: RIGHT\n    },\n    // [USB: 0xe4]\n    0x12: {\n      code: 'AltRight',\n      location: RIGHT\n    } // [USB: 0xe6]\n\n  };\n  locationTable[NUMPAD] = {\n    0x0D: {\n      code: 'NumpadEnter',\n      location: NUMPAD\n    } // [USB: 0x58]\n\n  };\n  mergeIf(locationTable[NUMPAD], 'moz', {\n    0x6D: {\n      code: 'NumpadSubtract',\n      location: NUMPAD\n    },\n    // [USB: 0x56]\n    0x6B: {\n      code: 'NumpadAdd',\n      location: NUMPAD\n    } // [USB: 0x57]\n\n  });\n  mergeIf(locationTable[LEFT], 'moz-mac', {\n    0xE0: {\n      code: 'OSLeft',\n      location: LEFT\n    } // [USB: 0xe3]\n\n  });\n  mergeIf(locationTable[RIGHT], 'moz-mac', {\n    0xE0: {\n      code: 'OSRight',\n      location: RIGHT\n    } // [USB: 0xe7]\n\n  });\n  mergeIf(locationTable[RIGHT], 'moz-win', {\n    0x5B: {\n      code: 'OSRight',\n      location: RIGHT\n    } // [USB: 0xe7]\n\n  });\n  mergeIf(locationTable[RIGHT], 'mac', {\n    0x5D: {\n      code: 'OSRight',\n      location: RIGHT\n    } // [USB: 0xe7]\n\n  });\n  mergeIf(locationTable[NUMPAD], 'chrome-mac', {\n    0x0C: {\n      code: 'NumLock',\n      location: NUMPAD\n    } // [USB: 0x53]\n\n  });\n  mergeIf(locationTable[NUMPAD], 'safari-mac', {\n    0x0C: {\n      code: 'NumLock',\n      location: NUMPAD\n    },\n    // [USB: 0x53]\n    0xBB: {\n      code: 'NumpadAdd',\n      location: NUMPAD\n    },\n    // [USB: 0x57]\n    0xBD: {\n      code: 'NumpadSubtract',\n      location: NUMPAD\n    },\n    // [USB: 0x56]\n    0xBE: {\n      code: 'NumpadDecimal',\n      location: NUMPAD\n    },\n    // [USB: 0x63]\n    0xBF: {\n      code: 'NumpadDivide',\n      location: NUMPAD\n    } // [USB: 0x54]\n\n  }); //--------------------------------------------------------------------\n  //\n  // Key Values\n  //\n  //--------------------------------------------------------------------\n  // Mapping from `code` values to `key` values. Values defined at:\n  // https://dvcs.w3.org/hg/dom3events/raw-file/tip/html/DOM3Events-key.html\n  // Entries are only provided when `key` differs from `code`. If\n  // printable, `shiftKey` has the shifted printable character. This\n  // assumes US Standard 101 layout\n\n  var codeToKeyTable = {\n    // Modifier Keys\n    ShiftLeft: {\n      key: 'Shift'\n    },\n    ShiftRight: {\n      key: 'Shift'\n    },\n    ControlLeft: {\n      key: 'Control'\n    },\n    ControlRight: {\n      key: 'Control'\n    },\n    AltLeft: {\n      key: 'Alt'\n    },\n    AltRight: {\n      key: 'Alt'\n    },\n    OSLeft: {\n      key: 'OS'\n    },\n    OSRight: {\n      key: 'OS'\n    },\n    // Whitespace Keys\n    NumpadEnter: {\n      key: 'Enter'\n    },\n    Space: {\n      key: ' '\n    },\n    // Printable Keys\n    Digit0: {\n      key: '0',\n      shiftKey: ')'\n    },\n    Digit1: {\n      key: '1',\n      shiftKey: '!'\n    },\n    Digit2: {\n      key: '2',\n      shiftKey: '@'\n    },\n    Digit3: {\n      key: '3',\n      shiftKey: '#'\n    },\n    Digit4: {\n      key: '4',\n      shiftKey: '$'\n    },\n    Digit5: {\n      key: '5',\n      shiftKey: '%'\n    },\n    Digit6: {\n      key: '6',\n      shiftKey: '^'\n    },\n    Digit7: {\n      key: '7',\n      shiftKey: '&'\n    },\n    Digit8: {\n      key: '8',\n      shiftKey: '*'\n    },\n    Digit9: {\n      key: '9',\n      shiftKey: '('\n    },\n    KeyA: {\n      key: 'a',\n      shiftKey: 'A'\n    },\n    KeyB: {\n      key: 'b',\n      shiftKey: 'B'\n    },\n    KeyC: {\n      key: 'c',\n      shiftKey: 'C'\n    },\n    KeyD: {\n      key: 'd',\n      shiftKey: 'D'\n    },\n    KeyE: {\n      key: 'e',\n      shiftKey: 'E'\n    },\n    KeyF: {\n      key: 'f',\n      shiftKey: 'F'\n    },\n    KeyG: {\n      key: 'g',\n      shiftKey: 'G'\n    },\n    KeyH: {\n      key: 'h',\n      shiftKey: 'H'\n    },\n    KeyI: {\n      key: 'i',\n      shiftKey: 'I'\n    },\n    KeyJ: {\n      key: 'j',\n      shiftKey: 'J'\n    },\n    KeyK: {\n      key: 'k',\n      shiftKey: 'K'\n    },\n    KeyL: {\n      key: 'l',\n      shiftKey: 'L'\n    },\n    KeyM: {\n      key: 'm',\n      shiftKey: 'M'\n    },\n    KeyN: {\n      key: 'n',\n      shiftKey: 'N'\n    },\n    KeyO: {\n      key: 'o',\n      shiftKey: 'O'\n    },\n    KeyP: {\n      key: 'p',\n      shiftKey: 'P'\n    },\n    KeyQ: {\n      key: 'q',\n      shiftKey: 'Q'\n    },\n    KeyR: {\n      key: 'r',\n      shiftKey: 'R'\n    },\n    KeyS: {\n      key: 's',\n      shiftKey: 'S'\n    },\n    KeyT: {\n      key: 't',\n      shiftKey: 'T'\n    },\n    KeyU: {\n      key: 'u',\n      shiftKey: 'U'\n    },\n    KeyV: {\n      key: 'v',\n      shiftKey: 'V'\n    },\n    KeyW: {\n      key: 'w',\n      shiftKey: 'W'\n    },\n    KeyX: {\n      key: 'x',\n      shiftKey: 'X'\n    },\n    KeyY: {\n      key: 'y',\n      shiftKey: 'Y'\n    },\n    KeyZ: {\n      key: 'z',\n      shiftKey: 'Z'\n    },\n    Numpad0: {\n      key: '0'\n    },\n    Numpad1: {\n      key: '1'\n    },\n    Numpad2: {\n      key: '2'\n    },\n    Numpad3: {\n      key: '3'\n    },\n    Numpad4: {\n      key: '4'\n    },\n    Numpad5: {\n      key: '5'\n    },\n    Numpad6: {\n      key: '6'\n    },\n    Numpad7: {\n      key: '7'\n    },\n    Numpad8: {\n      key: '8'\n    },\n    Numpad9: {\n      key: '9'\n    },\n    NumpadMultiply: {\n      key: '*'\n    },\n    NumpadAdd: {\n      key: '+'\n    },\n    NumpadComma: {\n      key: ','\n    },\n    NumpadSubtract: {\n      key: '-'\n    },\n    NumpadDecimal: {\n      key: '.'\n    },\n    NumpadDivide: {\n      key: '/'\n    },\n    Semicolon: {\n      key: ';',\n      shiftKey: ':'\n    },\n    Equal: {\n      key: '=',\n      shiftKey: '+'\n    },\n    Comma: {\n      key: ',',\n      shiftKey: '<'\n    },\n    Minus: {\n      key: '-',\n      shiftKey: '_'\n    },\n    Period: {\n      key: '.',\n      shiftKey: '>'\n    },\n    Slash: {\n      key: '/',\n      shiftKey: '?'\n    },\n    Backquote: {\n      key: '`',\n      shiftKey: '~'\n    },\n    BracketLeft: {\n      key: '[',\n      shiftKey: '{'\n    },\n    Backslash: {\n      key: '\\\\',\n      shiftKey: '|'\n    },\n    BracketRight: {\n      key: ']',\n      shiftKey: '}'\n    },\n    Quote: {\n      key: '\\'',\n      shiftKey: '\"'\n    },\n    IntlBackslash: {\n      key: '\\\\',\n      shiftKey: '|'\n    }\n  };\n  mergeIf(codeToKeyTable, 'mac', {\n    OSLeft: {\n      key: 'Meta'\n    },\n    OSRight: {\n      key: 'Meta'\n    }\n  }); // Corrections for 'key' names in older browsers (e.g. FF36-)\n  // https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent.key#Key_values\n\n  var keyFixTable = {\n    Esc: 'Escape',\n    Nonconvert: 'NonConvert',\n    Left: 'ArrowLeft',\n    Up: 'ArrowUp',\n    Right: 'ArrowRight',\n    Down: 'ArrowDown',\n    Del: 'Delete',\n    Menu: 'ContextMenu',\n    MediaNextTrack: 'MediaTrackNext',\n    MediaPreviousTrack: 'MediaTrackPrevious',\n    SelectMedia: 'MediaSelect',\n    HalfWidth: 'Hankaku',\n    FullWidth: 'Zenkaku',\n    RomanCharacters: 'Romaji',\n    Crsel: 'CrSel',\n    Exsel: 'ExSel',\n    Zoom: 'ZoomToggle'\n  }; //--------------------------------------------------------------------\n  //\n  // Exported Functions\n  //\n  //--------------------------------------------------------------------\n\n  var codeTable = remap(keyCodeToInfoTable, 'code');\n\n  try {\n    var nativeLocation = nativeKeyboardEvent && 'location' in new KeyboardEvent('');\n  } catch (_) {}\n\n  function keyInfoForEvent(event) {\n    var keyCode = 'keyCode' in event ? event.keyCode : 'which' in event ? event.which : 0;\n\n    var keyInfo = function () {\n      if (nativeLocation || 'keyLocation' in event) {\n        var location = nativeLocation ? event.location : event.keyLocation;\n\n        if (location && keyCode in locationTable[location]) {\n          return locationTable[location][keyCode];\n        }\n      }\n\n      if ('keyIdentifier' in event && event.keyIdentifier in keyIdentifierTable) {\n        return keyIdentifierTable[event.keyIdentifier];\n      }\n\n      if (keyCode in keyCodeToInfoTable) {\n        return keyCodeToInfoTable[keyCode];\n      }\n\n      return null;\n    }(); // TODO: Track these down and move to general tables\n\n\n    if (0) {\n      // TODO: Map these for newerish browsers?\n      // TODO: iOS only?\n      // TODO: Override with more common keyIdentifier name?\n      switch (event.keyIdentifier) {\n        case 'U+0010':\n          keyInfo = {\n            code: 'Function'\n          };\n          break;\n\n        case 'U+001C':\n          keyInfo = {\n            code: 'ArrowLeft'\n          };\n          break;\n\n        case 'U+001D':\n          keyInfo = {\n            code: 'ArrowRight'\n          };\n          break;\n\n        case 'U+001E':\n          keyInfo = {\n            code: 'ArrowUp'\n          };\n          break;\n\n        case 'U+001F':\n          keyInfo = {\n            code: 'ArrowDown'\n          };\n          break;\n      }\n    }\n\n    if (!keyInfo) return null;\n\n    var key = function () {\n      var entry = codeToKeyTable[keyInfo.code];\n      if (!entry) return keyInfo.code;\n      return event.shiftKey && 'shiftKey' in entry ? entry.shiftKey : entry.key;\n    }();\n\n    return {\n      code: keyInfo.code,\n      key: key,\n      location: keyInfo.location,\n      keyCap: keyInfo.keyCap\n    };\n  }\n\n  function queryKeyCap(code, locale) {\n    code = String(code);\n    if (!codeTable.hasOwnProperty(code)) return 'Undefined';\n    if (locale && String(locale).toLowerCase() !== 'en-us') throw Error('Unsupported locale');\n    var keyInfo = codeTable[code];\n    return keyInfo.keyCap || keyInfo.code || 'Undefined';\n  }\n\n  if ('KeyboardEvent' in global && 'defineProperty' in Object) {\n    (function () {\n      function define(o, p, v) {\n        if (p in o) return;\n        Object.defineProperty(o, p, v);\n      }\n\n      define(KeyboardEvent.prototype, 'code', {\n        get: function get() {\n          var keyInfo = keyInfoForEvent(this);\n          return keyInfo ? keyInfo.code : '';\n        }\n      }); // Fix for nonstandard `key` values (FF36-)\n\n      if ('key' in KeyboardEvent.prototype) {\n        var desc = Object.getOwnPropertyDescriptor(KeyboardEvent.prototype, 'key');\n        Object.defineProperty(KeyboardEvent.prototype, 'key', {\n          get: function get() {\n            var key = desc.get.call(this);\n            return keyFixTable.hasOwnProperty(key) ? keyFixTable[key] : key;\n          }\n        });\n      }\n\n      define(KeyboardEvent.prototype, 'key', {\n        get: function get() {\n          var keyInfo = keyInfoForEvent(this);\n          return keyInfo && 'key' in keyInfo ? keyInfo.key : 'Unidentified';\n        }\n      });\n      define(KeyboardEvent.prototype, 'location', {\n        get: function get() {\n          var keyInfo = keyInfoForEvent(this);\n          return keyInfo && 'location' in keyInfo ? keyInfo.location : STANDARD;\n        }\n      });\n      define(KeyboardEvent.prototype, 'locale', {\n        get: function get() {\n          return '';\n        }\n      });\n    })();\n  }\n\n  if (!('queryKeyCap' in global.KeyboardEvent)) global.KeyboardEvent.queryKeyCap = queryKeyCap; // Helper for IE8-\n\n  global.identifyKey = function (event) {\n    if ('code' in event) return;\n    var keyInfo = keyInfoForEvent(event);\n    event.code = keyInfo ? keyInfo.code : '';\n    event.key = keyInfo && 'key' in keyInfo ? keyInfo.key : 'Unidentified';\n    event.location = 'location' in event ? event.location : 'keyLocation' in event ? event.keyLocation : keyInfo && 'location' in keyInfo ? keyInfo.location : STANDARD;\n    event.locale = '';\n  };\n})(window);","map":null,"metadata":{},"sourceType":"script"}